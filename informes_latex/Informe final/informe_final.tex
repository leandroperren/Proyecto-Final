\documentclass{article}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[spanish,activeacute]{babel}
\usepackage{multirow}
\usepackage{float}
\usepackage{graphicx}

\graphicspath{ {images/} }
\setlength{\parskip}{10pt}
\renewcommand\theenumii{\theenumi.\arabic{enumii}}

\title{Desarrollo de métodos inteligentes para la detección y clasificación de ronquidos }
\author{Leandro Perren - Matias Meurzet}

\begin{document}
% cuerpo del documento

\maketitle
\tableofcontents

\newpage

\section*{Estructura del informe (Dps se elimina)}

Agradecimientos

Resumen

\begin{enumerate}
\item Introducción
\begin{enumerate}
\item Motivación.
\item Estado del arte.
\item Organización de la tesis.
\end{enumerate}
\item Método de detección de ronquidos por medio del T0.
\begin{enumerate}
\item Cálculo del T0 y comparación entre segmentos de distintas señales
\begin{enumerate}
\item Análisis señales correspondientes a hombres
\item Análisis señales correspondientes a mujeres
\end{enumerate}
\item Comparación de T0 entre hombres y mujeres
\item Análisis de sonidos no deseados (ruidos)
\item Mejora a través de funciones de recorte
\item Cantidad mínima de ronquidos por segmento
\item Tasas de aciertos del método en Matlab.
\end{enumerate}
\item Desarrollo de aplicación Android
\begin{enumerate}
\item Análisis y definición de requerimientos
\item Diseño del sistema y del software
\item Integración y prueba del sistema
\item Tasas de aciertos aplicación Android.
\end{enumerate}
\item Conclusión
\item Bibliografia
\item Anexos
\end{enumerate}

\newpage

\section*{Resumen}

En la actualidad existen distintas herramientas de uso doméstico para la detección de ronquidos, las cuales van desde elementos diseñados especialmente, como almohadas inteligentes o pulseras, hasta diferentes aplicaciones para dispositivos móviles. Todas ellas consisten del análisis de una señal capturada por medio del micrófono del dispositivo. \\
La problemática con estos métodos es que solamente realizan un análisis de la señal en busca de cambios bruscos del nivel de energía, esto hace que las aplicaciones sean poco robustas a los ruidos que se pueden presentar en un entorno cotidiano bajo condiciones normales. \\
En esta tesis se propone desarrollar una aplicación Android capaz de detectar episodios de ronquidos capturados por medio del micrófono del dispositivo y que sea robusta frente al ruido. 
Para ello se presenta un método basado en el cálculo del T0 por medio de la autocorrelacion, este método recorrerá por ventaneo en tiempo real toda la  señal capturada por el dispositivo y determinará si el T0 de esa ventana cae dentro de un rango determinado para que sea considerado ronquido. Este rango de T0 se determina mediante la extracción de una gran cantidad de ronquidos de señales limpias de formato *EDF provistas por un especialista de trastornos de sueño y que  contienen la grabación de toda una noche de sueño, 6 o 7 horas de duración, correspondientes a personas de ambos sexos. \\
La base del método que se propone esta en la naturaleza cuasi-periódica que los ronquidos presentan y que los ruidos no, a su vez la ventaja de utilizar el T0 se basa en que únicamente se analiza temporalmente la señal y que se puede utilizar señales de baja frecuencia (100Hz) lo que genera un costo computacional, de almacenamiento y de consumo de energía mucho menor que el de otros metodos que utilizan además carácteristicas frecuenciales. \\
Los resultados que se obtuvieron de las pruebas de la aplicación arrojaron buenas tasas de aciertos superando el 80\% y en algunos casos llegando cerca del 100\%, tanto para pruebas realizadas sobre señales limpias como para señales capturadas en entornos cotidianos conteniendo una gran cantidad de ruidos.
\newpage

\section{Introducción}
\subsection{Motivación} 
El ronquido es un sonido respiratorio producido durante el sueño pudiendo ser inspiratorio, espiratorio o bien ocupar todo el ciclo respiratorio. El surgimiento se debe a que el flujo de aire encuentra una obstrucción al pasar por detrás de la boca y la nariz, en donde la lengua y la parte superior de la garganta se encuentran con el paladar blando y la úvula. El choque de estas estructuras sumado al paso de la respiración determina la presencia del ronquido.

La importancia de la detección de esta patología excede el simple hecho de evitar roncar por las noches, esta situación puede ocasionar trastornos sociales al impedir el sueño de aquellos que rodeen al roncador, así como también producir el conocido Síndrome de Apneas Obstructivas del Sueño (SAOS). 

Actualmente existen numerosas herramientas y dispositivos que permiten detectar esta patología en una persona. Dentro de éstas se encuentran diferentes aplicaciones disponibles para dispositivos móviles (smartphones) que cuenten con sistema operativo (OS) Android [6] o AppleiOS[7],ejemplos de las mismas son las aplicaciones SnoreClock y AntiSnore para Android y, AntiRonquidos y SnoreLab para dispositivos iPhone. Otros dispositivos que se encuentran disponibles hoy en día y que suelen ser menos frecuentes y más costosos son, por ejemplo, Snore-detection pillow [9] o almohada detectora de ronquidos, las pulseras detectoras, las cuales son colocadas en la muñeca como si se tratara de un reloj, además de una cama inteligente (The Starry Night Sleep Technology Bed) [8] que dispone de un dispositivo de detección y ajuste de la posición de la cabeza para que los sonidos cesen. Algunos de los dispositivos mencionados para la detección de esta patología (principalmente dispositivos móviles) están basados en un simple análisis de la señal de audio digital, capturada por el dispositivo, buscando cambios bruscos que superen un umbral dado de energía, indicando así la presencia de ronquido.

La problemática de los métodos actuales mencionados, radica en el hecho de que no cualquier sonido que supere cierto umbral de energía es un ronquido. Este problema se puede presentar de manera habitual cuando un individuo realiza la grabación en un ambiente natural como una habitación, en la cual se pueden adicionar muchos ruidos. Se entiende como ruido toda aquella información no deseada que se encuentre contenida en la señal bajo análisis, generando inconvenientes, pudiendo ser estos tanto externos (colectivos, motos, vecinos, etc.) como internos (charlas, música, TV, cierre brusco de puerta, etc.) incorporando una gran cantidad de energía a la señal, siendo eventualmente detectados como ronquido. 

Desde esta problemática, se propone desarrollar una aplicación para dispositivos móviles la cual utilizando métodos más inteligentes que los actuales, sea capaz de reconocer y clasificar ronquidos, a partir de la captura de una señal de audio digital mediante el micrófono de un dispositivo movil (smartphone), realizando el análisis de la misma y bajo la aplicación de diversos conocimientos: 

\begin{enumerate}
 \item Mecánica de la respiración.
\item Fisiología y anatomía de la vía aérea superior (VAS).
\item Procesamiento de señales.
\item Informática.
\end{enumerate}

La importancia de la mecánica de la respiración [5] y de la fisiología y anatomía de la vía aérea superior (VAS) [5]: fosas nasales, faringe y laringe, reside en el conocimiento funcional del aparato respiratorio para comprender por qué se produce el ronquido. El funcionamiento incorrecto de alguna de sus partes provoca la oclusión intermitente de la VAS que predispone el desarrollo de la roncopatía. La informática [12][13] es una ciencia que estudia métodos, procesos y técnicas con el fin de almacenar, procesar y transmitir información y datos en formato digital. Los campos aplicables para este estudio van desde la ciencia de la computación hasta la ingeniería de software para el desarrollo de una solución integral de computo y comunicación capaz de procesar información de manera automática. El procesamiento de señales [10] permite la manipulación matemática de la señal para modificarla, mejorarla y extraer información en algún sentido con el fin de obtener las características necesarias para una posterior clasificación. 

El método que se desarrola en esta tesis presenta el desafío de lograr una detección de ronquidos con la mayor tasa de aciertos posible. Para ello fue preciso realizar un estudio exhaustivo de las características temporales de diferentes ronquidos de manera tal que la detección, aún en presencia de ruido, presente una gran robustez. Al estudiar los diferentes ronquidos se debió tener presente las condiciones del entorno en el que se captura la señal, ya que esto tiene incidencia directa en la amplia variedad de ruidos que pueden afectarla. 

Se pretende mediante este trabajo proporcionar una alternativa inteligente respecto a los métodos actuales de detección de ronquidos, además de ser un punto inicial para futuros desarrollos tecnológicos, no necesariamente software sobre teléfonos inteligentes (smartphones), sino también para otros dispositivos que pretendan incorporar inteligencia a fin de detectar el ronquido para llevar a cabo alguna acción determinada. A su vez se espera que sirva de base sólida para futuros trabajos que logren ampliar su alcance llevándolo a la detección y clasificación de otros trastornos como es el caso del SAOS[5]. 

\subsection{Estado del arte}
Aca segun mi parecer deberiamos analizar brevemente alguna de las apps disponibles y describir algunos de los papers que utilizan señales de estudios de sueños (IEEE).

\subsection{Organización de la tesis}
Esta tesis presenta la siguiente estructura:
\begin{itemize}
\item En el presente capítulo se describió la motivación de este desarrollo y el problema que será abordado. Se presenta una revisión
del estado del arte de dispositivos y aplicaciones destinados a detectar ronquidos, como también se describen trabajos investigativos orientados a la detección de los mismos utilizando señales obtenidas en estudios de sueños. Finalmente, se describe la estructura de capítulos.
\item En el capítulo 2 se describe el método de detección desarrollado en esta tesis. Primeramente se describe la extracción de ronquidos y calculo del T0 de las señales limpias EDF y se determinan en base a ellos una serie de parámetros. Para finalizar se presentan las tasas de acierto del algoritmo detector desarrollado en Matlab utilizando las señales limpias EDF.    
\item En el capítulo 3 se presenta el desarrollo de la aplicación Android. Primeramente se desarrollan las distintas etapas propuestas por la Ingeniería de Software. Luego se calculan las tasas de aciertos de la aplicación realizando distintas pruebas tanto con señales limpias (EDF) como en entornos cotidianos propensos a un alto contenido de ruidos.
\item El capítulo 4 dispone de las conclusiones particulares y generales como también de propuestas de futuros trabajos que podrían derivar del presente.
\end{itemize}

\section{Método de detección de ronquidos por medio del T0}

Para este trabajo se dispuso de una cantidad de 23 señales de formato EDF provistas por un médico especializado en trastornos de sueño. Cada una de ellas contiene la grabación de una persona mientras duerme con una duración promedio de 7 hs. Estas señales se registraron a una frecuencia de muestreo de 100Hz por medio del sistema médico Apnealink el cual realiza un análisis de la señal generando un archivo de extensión CSV, donde el propio sistema etiqueta los eventos de ronquidos indicando la hora en que se producen.  Mediante este archivo se pudo localizar en la señal los momentos de ronquidos y extraer algunos segmentos de ellos para poder analizarlos. 

De acuerdo a la extracción y análisis de distintos segmentos, se pudo observar que estos contienen una serie de concentraciones de energía separados entre sí, de manera que presentan cierta repetitividad o periodicidad, tal como se aprecia en el segmento de la Figura 1.

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure1}	
	\caption[Energia ronquidos]{Segmento de 1 minuto etiquetado como ronquidos.}
\end{figure}

Dada la baja resolución que presenta la señal en cuestión (100Hz) resulta imposible extraer características frecuenciales como son la transformada de fourier, formantes, espectrogramas, entre otras, es por esto que se debió buscar alguna caracerística temporal que sea representativa de los ronquidos. En consecuencia surgió la idea de medir la periodicidad de los eventos de ronquidos recién expuestos, a través del T0 (Período Fundamental), partiendo de la hipótesis de que aquellos segmentos que contienen sonidos no deseados (todo lo que no sea ronquido), no presentan este patrón repetitivo, permitiendo así poder hacer uso de ésta característica para diferenciarlos entre sí. Por otro lado la necesidad de solamente poder utilizar análisis temporal presenta la ventaja de generar un mayor ahorro de tiempo y capacidad de procesamiento por no realizar los calculos frecuenciales permitiendo también utilizar señales de baja resolución lo que genera un menor costo de almacenamiento.

Con el fin de utilizar el T0 para diferenciar segmentos de ronquidos de aquellos que no lo son, resulta necesario analizar si el T0 es una característica representativa de los ronquidos, en el sentido de que deberían presentar cierta homogeneidad en los valores obtenidos de segmentos provenientes de diferentes señales. Es por esto que en las siguientes secciones se presentan los resultados obtenidos de extraer segmentos de ronquidos de diferentes duraciones y de distintas señales de ambos sexos a los cuales se les calculó el correspondiente T0.


\subsection{Cálculo del T0 y comparación entre segmentos de distintas señales}

Debido a que se dispone de señales de personas de ambos sexos resulta interesante realizar el análisis separadamente a fin de determinar si existen diferencias notables en los ronquidos producidos por hombres o mujeres ya que esto podría implicar la necesidad de indicar el género en la aplicación a desarrollar en esta tésis. 
Por otra parte se procedió a extraer segmentos de diferentes duraciones con el objetivo de determinar si la variación de la misma implica variaciones importantes en los valores de T0 y asi poder determinar un valor óptimo de duración del segmento. 


\subsection*{Análisis de señales correspondientes a hombres}
En esta sección se presentan los resultados obtenidos de los análisis realizados a señales de hombres. Para ello se tomarón 5 señales *.EDF dejando algunas señales para las pruebas finales del método. Para cada una de estas señales se extrajeron manualmente segmentos de ronquidos de distintas duraciones, de 30 segundos, 1, 2, 3 y 5 minutos, puntualmente se extrajeron 5 segmentos de cada una de estas duraciones. Posteriormente por medio de un script desarrollado en Matlab el cual utiliza el método de autocorrelación se calculó para cada uno de estos segmentos su valor de T0 y su inversa F0 (frecuencia fundamental). En la Figura 2 se encuentra representado en la parte superior un segmento de 1 minuto el cual contiene ronquidos y en la parte inferior su correspondiente autocorrelación. 
Se puede observar en la gráfica de la autocorrelación la existencia de un valor pico en torno a los 4 segundos correspondiente al T0 de los ronquidos contenidos en el segmento. 
\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure2}	
	\caption[Energia ronquidos]{Segmento con ronquidos y su autocorrelación.}
\end{figure}

En el Cuadro 1 podemos ver los valores del T0 y F0 de 5 segmentos de ronquidos de 1 minuto de duración todos extraídos de la misma señal en diferentes momentos.

\begin{table}[htbp]
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
Ronquido & Hora (HH:MM:SS) & T0 (s) & F0 (Hz) \\
\hline \hline
1 & 03:33:59 & 4.15 & 0.24 \\ \hline
2 & 02:12:12 & 4.68 & 0.21 \\ \hline
3 & 02:11:04 & 4.86 & 0.21 \\ \hline
4 & 03:24:43 & 3.96 & 0.25 \\ \hline
5 & 04:33:24 & 3.79 & 0.26 \\ \hline
\multicolumn{2}{|r|}{Media} & 4.29 & 0.23 \\ \hline
\multicolumn{2}{|r|}{Desvío Estándar} & 0.46 & 0.023 \\ \hline
\end{tabular}
\caption{T0 y F0 de segmentos de 1 minuto de duración.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

Como primer punto se analiza que sucede con los T0 entre segmentos de una misma señal. Si se observa el valor del Desvío Estándar para los T0 de los segmentos con ronquidos presentados en el Cuadro 1, se puede observar que tiene un valor de 0.46 segundos lo cual es un valor pequeño que estaría indicando cierta homogeneidad. Debido a que se extrajeron segmentos de distintas señales se puede observar en el Cuadro 2 los valores del Desvío Estandar de los T0 de cada señal y para cada duración de segmentos. Viendo estos datos se concluye que cualquiera sea la duración utilizada en los segmentos, los valores del desvío estándar son menores a 1 segundo, con lo cual se está asegurando que la caracteristica T0 es homogénea entre segmentos de ronquidos de una misma señal. 

\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Señal & \multicolumn{5}{|c|}{Desvio estandar del T0} \\
\hline \hline
& 1 min & 30 seg & 2 min & 3 min & 5 min \\ \hline
Paciente 1 & 0.46 & 0.47 & 0.46 & 0.43 & 0.24 \\ \hline
Paciente 2 & 0.35 & 0.22 & 0.27 & 0.14 & 0.31 \\ \hline
Paciente 3 & 0.25 & 0.12 & 0.20 & 0.21 & 0.26 \\ \hline
Paciente 4 & 0.52 & 0.61 & 0.62 & 0.70 & 0.85 \\ \hline
Paciente 5 & 0.09 & 0.24 & 0.17 & 0.17 & 0.08 \\ \hline
\end{tabular}
\caption{Desvíos estándar de los T0 de cada señal para distintas duraciones.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

Siguiendo el análisis se observa ahora que sucede con los valores del T0 entre segmentos extraídos de diferentes señales, ya que si bien esta característica presentaba cierta homogeneidad entre los segmentos de una misma señal, podrían existir severas diferencias con segmentos provenientes de distintas señales y por ende de distintas personas y asi no se podría generalizar el uso del T0 como detector de ronquidos. Para ello se calculó el valor de la media y el desvío estándar de los T0 de todos los segmentos de 1 minuto de duración independientemente de la señal a la que pertenezcan. En el cuadro 3 se presentan los valores del T0 de todos los segmentos de 1 minuto de duración seguidos de su media y desvío estándar, mientras que en el Cuadro 4 se presentan las medias y desvios estandar de los T0 de todos los segmentos de cada una de las duraciones.

Se puede observar en el cuadro 4 que las medias son todas cercanas a los 4 segundos y que los desvíos estándar son inferiores a 1 segundo. Esto permite asegurar que la característica es representativa, no solo dentro de los segmentos de ronquidos de una misma señal, sino también entre segmentos de distintas señales, por lo que no existirían problemas en la distinción via ésta característica usando cualquier grabación, siempre y cuando los valores de T0 en los segmentos de ruidos difieran suficientemente como para distinguirlos, este aspecto se analizará en secciones posteriores.

Por último, se hace una evaluación acerca de la duración más apropiada de los segmentos. Como recientemente se ha mencionado y, como se podía observar en el Cuadro 4, los valores de las medias y los desvíos de todos los segmentos de ronquidos tomando distintas duraciones resultan similares entre si, por lo tanto, se concluye que la duración óptima a utilizar, será la de 5 minutos, ya que se genera un ahorro en tiempo de procesamiento y cálculo. También es importante explicar que no se consideran tamaños de segmentos de mayor duración, ya que a los efectos de llevar esto a una aplicación que sea capaz de etiquetar los momentos donde se producen ronquidos, al tomar duraciones de 8, 10 o más minutos se estaría perdiendo precisión en el presente análisis.



\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Señal & Hora inicio & T0 (s) & F0 (Hz) \\ 
\hline \hline
Paciente 1 & 03:33:59 & 4.15 & 0.24 \\ \hline
& 02:12:12 & 4.68 & 0.21 \\ \hline
& 02:11:04 & 4.86 & 0.21 \\ \hline
& 03:24:43 & 3.96 & 0.25 \\ \hline
& 04:33:24 & 3.79 & 0.26 \\ \hline
Paciente 2 & 22:25:37 & 3.52 & 0.28 \\ \hline
& 22:28:24 & 3.73 & 0.27 \\ \hline
& 22:30:03 & 4.15 & 0.24 \\ \hline
& 22:52:37 & 3.22 & 0.31 \\ \hline
& 23:16:03 & 3.82 & 0.26 \\ \hline
Paciente 3 & 01:43:47 & 3.77 & 0.27 \\ \hline
& 02:06:04 & 4.26 & 0.23 \\ \hline
& 02:31:09 & 3.95 & 0.25 \\ \hline
& 03:10:34 & 3.58 & 0.28 \\ \hline
& 04:52:01 & 3.93 & 0.25 \\ \hline
Paciente 4 & 01:30:03 & 5.83 & 0.17 \\ \hline
& 03:48:38 & 4.92 & 0.20 \\ \hline
& 03:53:09 & 4.74 & 0.21 \\ \hline
& 22:25:30 & 4.88 & 0.20 \\ \hline
& 00:28:31 & 4.46 & 0.22 \\ \hline
Paciente 5 & 04:21:07 & 3.90 & 0.2564 \\ \hline
& 04:22:42 & 3.91 & 0.2558 \\ \hline
& 04:57:37 & 3.82 & 0.2618 \\ \hline
& 23:11:57 & 3.77 & 0.2653 \\ \hline
& 23:42:54 & 3.68 & 0.2717 \\ \hline
\multicolumn{2}{|r|}{Media} & 4.13 & 0.24 \\ \hline
\multicolumn{2}{|r|}{Desvío} & 0.58 & 0.0319 \\ \hline
\end{tabular}
\caption{T0 y F0 de segmentos con ronquidos de 1 minuto en distintas señales de hombres.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Duración segmentos & Media & Desvío Estándar\\ 
\hline \hline
30 segundos & 4.05 & 0.64 \\ \hline
1 minuto & 4.13 & 0.58 \\ \hline
2 minutos & 4.13 & 0.71 \\ \hline
3 minutos & 4.11 & 0.69 \\ \hline
5 minutos & 4.18 & 0.71 \\ \hline
\end{tabular}
\caption{Medias y desvíos estándar de los T0 para distintas duraciones.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

\subsection*{Análisis de señales correspondientes a mujeres}
En esta sección se repetirán los análisis anteriores pero utilizando señales de mujeres. Para ello también se tomarón 5 señales *.EDF dejando algunas señales para las pruebas finales del método. Para cada una de estas señales se extrajeron manualmente 5 segmentos de ronquidos de cada una de las duraciones anteriores.
A fin de determinar si el T0 resulta homogeneo entre segmentos de una misma señal se analiza a continuación que valores toma el T0 entre segmentos extraídos de una misma señal.

En el cuadro 5 se encuentran los valores de los desvíos estandar de todos los T0 de los segmentos extraídos de cada paciente y para cada duración. Si se observan los desvíos estandar todos ellos tienen valores menores a 1 segundo, con lo cual se puede concluir que presentan cierta homogeneidad al igual que ocurría con los segmentos extraídos de las señales de hombres.  

\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Señal & \multicolumn{5}{|c|}{Desvio estandar del T0} \\
\hline \hline
& 1 min & 30 seg & 2 min & 3 min & 5 min \\ \hline
Paciente 6 & 0.34 & 0.46 & 0.45 & 0.37 & 0.36 \\ \hline
Paciente 7 & 0.56 & 0.43 & 0.28 & 0.34 & 0.46 \\ \hline
Paciente 8 & 0.37 & 0.43 & 0.32 & 0.37 & 0.65 \\ \hline
Paciente 9 & 0.25 & 0.27 & 0.21 & 0.21 & 0.21 \\ \hline
Paciente 10 & 0.15 & 0.16 & 0.20 & 0.09 & 0.11 \\ \hline
\end{tabular}
\caption{Desvíos estándar de los T0 de cada señal para distintas duraciones.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

A continuación se verifica que el T0 resulta homogeneo entre segmentos de distintas señales. En el cuadro 6 se encuentran los valores de las medias y desvíos estandar de los T0 de los segmentos para cada duración sin tener en cuenta a que paciente pertenece. Analizando estos datos se puede ver que en todos los casos el valor del desvío está muy por debajo de 1 segundo, por esto se concluye que cualquiera sea la señal, los valores del T0 resultan homogéneos, es decir, que la característica realmente es representativa de los segmentos con eventos de ronquidos.

\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Duración segmentos & Media & Desvío Estándar\\ 
\hline \hline
30 segundos & 4.32 & 0.51 \\ \hline
1 minuto & 4.24 & 0.50 \\ \hline
2 minutos & 4.36 & 0.49 \\ \hline
3 minutos & 4.28 & 0.50 \\ \hline
5 minutos & 4.40 & 0.52 \\ \hline
\end{tabular}
\caption{Medias y desvíos estándar de los T0 para distintas duraciones.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

Tal como se concluyó en el caso de las señales de hombres, aquí también puede verse que la media, cualquiera sea la duración de los segmentos, oscila en torno a los 4.3 segundos y el desvío en torno a los 0.50 segundos, por lo cual dado este bajo número también se opta por la duración de segmentos de 5 minutos como la más óptima en términos de procesamiento y precisión.

\subsection{Comparación de T0 entre hombres y mujeres}

Finalizado el análisis de las señales de hombres y mujeres por separado, se realiza un análisis comparativo del T0 promedio entre dichas señales. Debido a que tanto en el análisis de hombres como en el de mujeres se llegó a la conclusión, de que la duración más óptima de los segmentos es la de 5 minutos, la comparación entre media y desvío de los T0 se realizó directamente con esta duración. 

En el cuadro 7, se encuentran representados los valores de las medias y desvíos de los T0 correspondientes a segmentos de 5 minutos, tanto de señales de hombres como de mujeres. 

\begin{table}[H]
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Tipo de señal & Media (5 min) & Desvío Estándar (5 min)\\ 
\hline \hline
Hombres & 4.18 & 0.71 \\ \hline
Mujeres & 4.40 & 0.52 \\ \hline
\end{tabular}
\caption{Media y desvío de los T0 de hombres y mujeres.}
\label{tabla:Ronquidos}
\end{center}
\end{table}

Se puede observar que los valores promedios en ambos casos (mujeres y hombres), son prácticamente similares y, los correspondientes desvíos estándar, indican también cierta similitud, aunque en el caso de los hombres son levementes mayores. De todas maneras esta pequeña diferencia, no implica inconvenientes a la hora de la detección. De esta manera se descarta la necesidad de que un usuario de la aplicación Android tenga que indicar el género antes de comenzar su uso.

\subsection{Análisis de sonidos no deseados (ruidos)}
Dentro de esta sección se describen los resultados obtenidos del análisis realizado a sonidos no deseados. Por sonido no deseado, debe entenderse como todo aquel sonido que se puede acoplar en una grabación en entornos cotidianos y, que no se trata de un ronquido. Es por ésto, que a los fines del presente trabajo, se consideran como ruidos los sonidos de vehículos, murmullos o personas hablando, música, etcétera.

Hasta el momento se demostró que los valores del T0 para segmentos con ronquidos extraídos de diferentes señales tanto de mujeres como hombres, presentan cierta similitud permitiendo concluir que el T0 es una característica representativa de los segmentos con ronquidos. De todas maneras, esto no es suficiente para poder utilizar esta característica en una aplicación que permita detectar estos segmentos diferenciandolos de aquellos que contienen solo ruidos. Esto se debe a que aquellos sonidos no deseados que se pudieran capturar durante la grabación podrían tener un T0 similar que llegue a caer dentro del rango establecido para ser considerados como ronquidos.
Para ello se demostrará en la presente sección que bajo condiciones normales los sonidos no deseados que se pueden capturar por medio del micrófono de un dispositivo movil presentan valores del T0 fuera del rango representativo de los ronquidos.

Se comenzó capturando distintas señales por medio de dispositivos móviles como una tablet y dos celulares. Para esto se instaló en los dispositivos la aplicación Easy Voice Recorder por medio de la cual se grabaron archivos en formato .WAV. Estas grabaciones se llevaron a cabo en ambientes bajo condiciones normales durante las horas del día ya que es mayor la cantidad de ruidos presentes, todas se capturaron a una frecuencia de muestreo de 8000 Hz que es la mínima frecuencia de muestreo que admite la aplicación, pero fueron submuestreadas a 100Hz de manera que tengan igual frecuencia de muestreo que las EDF. Luego se analizaron manualmente con el software Audacity extrayendo segmentos de 1 y 5 minutos que contenían distintos ruidos, por ejemplo: sonidos de vehículos en la calle, personas hablando, ladridos de perros, música proveniente de una radio y sonido de máquinas de obreros trabajando.

En la parte superior de la figura 3 se puede observar un segmento de 1 minuto el cual contiene ruido ambiental, proveniente del exterior, tal como máquinas de personas trabajando, tráfico de vehículos y personas hablando, mientras que en la gráfica de la parte inferior se encuentra su autocorrelación. 
A su vez el segmento graficado en la figura 4 consiste del sonido de un vehículo que proviene de la calle, la figura 5 contiene el sonido de transito de vehículos proveniente del exterior, primero una motocicleta y luego un automóvil que estaciona y sale al cabo de un tiempo y la figura 6 contiene el sonido de dos perros ladrando, todas ellas acompañadas en la parte inferior de su correspondiente autocorrelación.

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure3}	
	\caption[Energia ronquidos]{Sonido de maquinas trabajando, personas hablando y vehículos.}
\end{figure}

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure4}	
	\caption[Energia ronquidos]{Sonido de un automovil circulando.}
\end{figure}

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure5}	
	\caption[Energia ronquidos]{Sonido de dos vehículos circulando.}
\end{figure}

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure6}	
	\caption[Energia ronquidos]{Sonido de perros ladrando.}
\end{figure}

Como se puede ver en las figuras 3, 4 ,5 y 6, en los cuatro gráficos de la autocorrelación (parte inferior) no existen en ellos la presencia de un valor pico que sobresalga del resto como si sucede en los segmentos con ronquidos, donde claramente existe un valor pico correspondiente al T0, esto se ve reflejado claramente en la comparación de las autocorrelaciones graficadas en la figura 7. Esto se debe a que en los segmentos con ronquidos, las señales presentan una naturaleza cuasi-periódica debido a la presencia de una serie de ronquidos de manera contínua, y a que los mismos tienen una apariencia similar entre sí; ésto no ocurre en los ruidos antes analizados, donde tienden a concentrar su energía en un momento determinado (por ejemplo, el caso de vehículos). 

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure7}	
	\caption[Energia ronquidos]{Autocorrelacion de ronquidos y autocorrelación sonido ambiental.}
\end{figure}

Debido a que los segmentos analizados recientemente eran todos de 1 minuto de duración, y ya que se concluyo que la duración de 5 minutos era la mas óptima en el caso de segmentos con ronquidos, es que también se extrajeron segmentos de 5 minutos de sonidos no deseados. En las figuras 8,9 y 10 se ven representados los mismos con su correspondiente autocorrelación. 

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure8}	
	\caption[Energia ronquidos]{Sonido de un automovil circulando.}
\end{figure}

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure9}	
	\caption[Energia ronquidos]{Sonido de dos vehículos circulando.}
\end{figure}

\begin{figure}[H]
	\centering
		\includegraphics[width=1\columnwidth]{figure10}	
	\caption[Energia ronquidos]{Sonido de dos vehículos circulando y ladridos de perros.}
\end{figure}

Tomando duraciones de 5 minutos se puede ver que en algunos segmentos se juntan distintos sonidos no deseados que antes (segmentos de 1 minuto de duración) se trataron separadamente como se puede ver en la figura 10, esto es interesante para ver que sucede con el T0 en segmentos con muchos y diferentes ruidos. 
Si se observan las gráficas de autocorrelación de las figuras 8 y 9 se ve que el aumento del tamaño del segmento no implica cambios ya que no se observa ningún pico sobresaliente, lo mismo sucede para el caso de la figura 10 que contiene distintos ruidos en un mismo segmento. Estos resultados permiten distinguir claramente estos segmentos de aquellos con ronquidos ya que los segmentos con ruidos no presentan un valor de T0 sobresaliente en torno a los 4 segundos que era el valor promedio que se encontró en los segmentos con ronquidos. 

Debido a que se demostró que el T0 es una característica representativa de los ronquidos tanto de mujeres como de hombres y que los análisis de segmentos de ruidos presentan valores del T0 distinguibles se puede concluir que el T0 es una buena característica a utilizar para la detección de los segmentos con ronquidos pudiendo diferenciarlos de sonidos no deseados que puedan encontrarse en grabaciones en entornos cotidianos y asi lograr la robustez que se necesita.

\subsection{Mejora a través de funciones de recorte}
\end{document}

